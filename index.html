<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>רבי עקיבא - גרסת הדו-ממד היציבה</title>
    <style>
        body { margin: 0; overflow: hidden; background: #222; font-family: sans-serif; }
        canvas { display: block; background: #333; }
        #ui {
            position: absolute; top: 10px; right: 10px;
            color: white; background: rgba(0,0,0,0.8);
            padding: 15px; border-radius: 8px; border-right: 5px solid #ffcc00;
        }
        #controls {
            position: absolute; bottom: 20px; left: 20px;
            display: flex; gap: 10px;
        }
        .btn {
            width: 60px; height: 60px; background: #444; color: white;
            border: 2px solid #666; border-radius: 10px;
            display: flex; align-items: center; justify-content: center; font-size: 24px;
        }
    </style>
</head>
<body>

    <div id="ui">
        <strong>רחוב רבי עקיבא - מבט על</strong><br>
        השתמש בחצים כדי לנהוג.
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        // הגדרות שחקן
        const player = {
            x: canvas.width / 2,
            y: canvas.height - 100,
            w: 30,
            h: 50,
            color: '#0066ff',
            speed: 5
        };

        const keys = {};
        window.onkeydown = e => keys[e.code] = true;
        window.onkeyup = e => keys[e.code] = false;

        function drawPlayer() {
            ctx.fillStyle = player.color;
            ctx.fillRect(player.x - player.w/2, player.y - player.h/2, player.w, player.h);
            
            // פנסים
            ctx.fillStyle = 'yellow';
            ctx.fillRect(player.x - player.w/2 + 5, player.y - player.h/2 - 5, 5, 5);
            ctx.fillRect(player.x + player.w/2 - 10, player.y - player.h/2 - 5, 5, 5);
        }

        function drawRoad() {
            // כביש
            ctx.fillStyle = '#444';
            ctx.fillRect(canvas.width/2 - 100, 0, 200, canvas.height);
            
            // קו קווקו
            ctx.strokeStyle = 'white';
            ctx.setLineDash([20, 20]);
            ctx.beginPath();
            ctx.moveTo(canvas.width/2, 0);
            ctx.lineTo(canvas.width/2, canvas.height);
            ctx.stroke();
        }

        function update() {
            if (keys['ArrowUp'] || keys['KeyW']) player.y -= player.speed;
            if (keys['ArrowDown'] || keys['KeyS']) player.y += player.speed;
            if (keys['ArrowLeft'] || keys['KeyA']) player.x -= player.speed;
            if (keys['ArrowRight'] || keys['KeyD']) player.x += player.speed;

            // גבולות כביש
            if (player.x < canvas.width/2 - 85) player.x = canvas.width/2 - 85;
            if (player.x > canvas.width/2 + 85) player.x = canvas.width/2 + 85;
        }

        function gameLoop() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawRoad();
            update();
            drawPlayer();
            requestAnimationFrame(gameLoop);
        }

        gameLoop();

        window.onresize = () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        };
    </script>
</body>
</html>
